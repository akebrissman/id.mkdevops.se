<!-- user/profile.html -->
{% extends "layout.html" %}
{% block content %}
    <div class="panel panel-default">
        <div class="panel-heading">
            <h1>{{ _('Welcome') }} {{ current_user.full_name }}</h1>
        </div>
        <div class="panel-body">
            <p><strong>{{ _('This is your personal profile page.') }}</strong></p>

            {% if current_user.email != 'test@kb.se' %}
                <a class="btn btn-default"
                   href="{{ url_for('user.edit_details', user_id=current_user.id) }}">
                    {{ _('Edit Display Name') }}
                </a>
                <a class="btn btn-default"
                   href="{{ url_for('user.change_password', user_id=current_user.id) }}">
                    {{ _('Change Password') }}
                </a>
            {% endif %}
        </div>
    </div>

    {% if current_user.email != 'test@kb.se' %}
        <div class="panel panel-default">
            <div class="panel-heading">
                <h3>{{ _('Information About Your Permissions') }}</h3>
            </div>
            <div class="panel-body">
                <p>{{ _('If you are missing a permission or any of the permissions below are '
                        'incorrect, please contact the cataloging admin for that collection.') }}</p>
                <p>{{ _('You can find the collection administrator contact information by following the collection link '
                        'below or by going to <a href="%(collections_link)s">the Collections list view</a> and selecting '
                        'the collection there.', collections_link=url_for('collection.home')) }}</p>
                <p>{{ _('For any other questions or concerns, please contact customer service at '
                        '<a href="mailto:libris@kb.se">libris@kb.se</a>.') }}</p>
            </div>
        </div>
    {% endif %}

    <div class="panel panel-default">
        <div class="panel-heading">
            <h3>{{ _('My Permissions') }}</h3>
        </div>
        <div class="panel-body">
            <table class="table table-hover">
                <thead>
                <tr>
                    <th>{{ _('Code') }}</th>
                    <th>{{ _('Friendly Name') }}</th>
                    <th>{{ _('Registrant') }}</th>
                    <th>{{ _('Cataloger') }}</th>
                    <th>{{ _('Cataloging Admin') }}</th>
                </tr>
                </thead>
                <tbody>
                {% for permission in user.permissions %}
                    <tr>
                        <td>
                            <a title="{{ _('View') }}"
                               href="{{ url_for('collection.view', collection_code=permission.collection.code) }}">
                                {{ permission.collection.code }}
                            </a>
                        </td>
                        <td>{{ permission.collection.friendly_name }}</td>
                        <td class="{{ "bool-value-{}".format(permission.registrant).lower() }}">
                            {{ _('Yes') if permission.registrant else _('No') }}
                        </td>
                        <td class="{{ "bool-value-{}".format(permission.cataloger).lower() }}">
                            {{ _('Yes') if permission.cataloger else _('No') }}
                        </td>
                        <td class="{{ "bool-value-{}".format(permission.cataloging_admin).lower() }}">
                            {{ _('Yes') if permission.cataloging_admin else _('No') }}
                        </td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
{% endblock %}
